# 优化版照片分类器使用指南

## 概述
优化版照片分类器基于原始版本进行了全面改进，实现了配置外部化、专业日志系统和增强的错误处理。

## 主要改进

### 1. 配置外部化 ✅
- 所有配置项移至 `config.json` 文件
- 支持命令行参数覆盖配置
- 配置验证和错误提示

### 2. 专业日志系统 ✅  
- 替换所有 `print` 语句为专业日志
- 支持文件和控制台双重输出
- 可配置日志级别和格式

### 3. 增强错误处理 ✅
- 详细的异常信息和处理
- 数据库事务回滚机制
- 文件操作安全检查

## 使用方法

### 基本使用
```bash
# 使用默认配置运行
python src/photo_classifier_optimized.py

# 使用自定义配置文件
python src/photo_classifier_optimized.py --config my_config.json

# 创建数据库表
python src/photo_classifier_optimized.py --create-table

# 启用详细日志
python src/photo_classifier_optimized.py --verbose
```

### 配置文件说明
`config.json` 文件包含完整的配置选项，包括路径设置、支持格式、日志配置等。

### 命令行参数
- `--config`: 指定配置文件路径
- `--create-table`: 创建/重建数据库表
- `--input`: 覆盖配置文件中的输入目录
- `--verbose`: 启用详细日志输出

## 功能对比

| 功能 | 原版本 | 优化版本 |
|------|--------|----------|
| 配置管理 | 硬编码 | 外部配置文件 |
| 日志系统 | print语句 | 专业日志框架 |
| 错误处理 | 基础异常 | 详细错误信息 |
| 数据库 | 基础表结构 | 增强元数据 |
| 命令行支持 | 无 | 完整参数支持 |

## 最佳实践

1. **首次使用**
   - 修改config.json中的路径配置
   - 创建数据库表
   - 运行分类程序

2. **定期维护**
   - 检查日志文件中的错误信息
   - 定期备份数据库文件
   - 清理过期的日志文件

通过这些改进，优化版本提供了更加稳定、可维护和用户友好的照片分类体验。 